* cl-duckdb (WiP)

#+begin_html
<a href="https://github.com/ak-coram/cl-duckdb/actions">
<img alt="Build Status" src="https://github.com/ak-coram/cl-duckdb/workflows/CI/badge.svg" />
</a>
#+end_html

This is a CFFI wrapper around the [[https://duckdb.org/][DuckDB]] C API.

** Development setup

Currently only Linux and BSDs have been tested.

1. Install [[https://sbcl.org/][SBCL]], [[https://www.quicklisp.org/][Quicklisp]], [[https://sourceware.org/libffi/][libffi]] and of course [[https://duckdb.org/][DuckDB]].
2. Clone this repository and add it as a local Quicklisp project, for example:

#+begin_src sh
  git clone git@github.com:ak-coram/cl-duckdb.git ~/Projects/cl-duckdb
  ln -s ~/Projects/cl-duckdb ~/quicklisp/local-projects/cl-duckdb
#+end_src

3. Start your favored REPL (e.g. src_sh[:exports code]{sbcl}) and load the library
   using Quicklisp: src_lisp[:exports code]{(ql:quickload :duckdb)}

*** Running tests

1. Load the tests via Quicklisp: src_lisp[:exports code]{(ql:quickload :duckdb/test)}
2. Use [[https://asdf.common-lisp.dev/][ASDF]] or [[https://fiveam.common-lisp.dev/][FiveAM]] to run the tests:

#+begin_src lisp
  ;; Using ASDF:
  (asdf:test-system :duckdb)
  ;; Using FiveAM directly:
  (fiveam:run! :duckdb)
#+end_src

** Roadmap

- [-] Support for querying built-in general-purpose types
  - [X] VARCHAR
  - [X] BOOLEAN
  - [X] TINYINT
  - [X] SMALLINT
  - [X] INTEGER
  - [X] BIGINT
  - [X] HUGEINT
  - [X] UTINYINT
  - [X] USMALLINT
  - [X] UINTEGER
  - [X] UBIGINT
  - [X] REAL (FLOAT)
  - [X] DOUBLE
  - [X] BLOB
  - [X] DATE
  - [ ] DECIMAL(s, p)
  - [X] TIMESTAMP
  - [X] TIMESTAMP WITH TIME ZONE
  - [X] INTERVAL
  - [X] TIME
  - [X] UUID
- [ ] Support for binding built-in general-purpose types
- [ ] Support for querying nested / composite types
- [ ] Support for binding nested / composite types
- [ ] ...

** License

Released under the MIT License, same as DuckDB.

